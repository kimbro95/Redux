######################
### 0 Introduction ###
######################
-Redux
ê¸°ë³¸ì ìœ¼ë¡œ Javascript applicationë“¤ì˜ state(ìƒíƒœ)ë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì´ë‹¤.
Reactì™€ ë§ì´ ì‚¬ìš©ë˜ë©´ì„œ ìœ ëª…í•´ì¡Œìœ¼ë‚˜, Reactì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì•„ë‹ˆë‹¤.
Angular, Vue,js, Vanilla JSë“± JSì–¸ì–´ë‚´ì˜ ì—¬ëŸ¬ê³³ì—ì„œ ì‚¬ìš©ê°€ëŠ¥í•˜ë‹¤.



#############################
### 1.1 Store and Reducer ###
#############################
-Redux ì„¤ì¹˜
npm i redux

-Store
StoreëŠ” dataë¥¼ ì €ì¥í•˜ëŠ” ê³³

-Reducer
ReducerëŠ” dataë¥¼ modifyí•´ì£¼ëŠ” í•¨ìˆ˜ë¡œ reducerê°€ returní•˜ëŠ” dataëŠ” applicationì— ìˆëŠ” dataê°€ ëœë‹¤.
Reducerë§Œì´ dataë¥¼ modifyí•œë‹¤.

-CreateStore
CreateStoreëŠ” reducerë¥¼ ìš”êµ¬í•œë‹¤.



###################
### 1.2 Actions ###
###################
-Action
reduxì—ì„œ functionì„ ë¶€ë¥¼ ë•Œ ë‘ë²ˆì§¸ parameter ë˜ëŠ” argumentìœ¼ë¡œ reducerì™€ ì†Œí†µí•˜ê¸° ìœ„í•œ ë°©ë²•
reducerì—ê²Œ Actionì„ ë³´ë‚´ëŠ” ë°©ë²• => store.dispatch({ type : value });



#########################
### 1.3 Subscriptions ###
#########################
-Subscibe
SubscibeëŠ” storeì•ˆì— ìˆëŠ” ë³€í™”ë¥¼ ê°ì§€
ex) store.subscibe(function) --> storeì•ˆì— ë³€í™”ê°€ ê°ì§€ë˜ë©´ funcë¥¼ ì‹¤í–‰



##########################
### 1.4 Recap Refactor ###
##########################
-reducer
í˜„ì¬ ìƒíƒœì˜ applicationê³¼ í•¨ê»˜ ë¶ˆë ¤ì§€ëŠ” function(+ with action) returní•˜ëŠ” ê°’ì€ applicationì˜ stateê°’ì´ëœë‹¤.

-action
reducerì™€ ì†Œí†µí•˜ëŠ” ë°©ë²•ìœ¼ë¡œ â­Objectâ­ì—¬ì•¼í•˜ê³  key ì´ë¦„ì€ â­typeâ­ì´ì—¬ì•¼í•œë‹¤.

-dispatch
reducerì—ê±° actionì„ ë³´ë‚´ëŠ” ë°©ë²•

-subscibe
storeì˜ ë³€í™”ë¥¼ ê°ì§€í•˜ë©´ ì¸ìê°’ìœ¼ë¡œ ì¤€ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œë‹¤.

-switch
reducerì—ì„œ action ê°’ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì²˜ë¦¬ í•  ë•Œ
if else if esle ë°©ì‹ë³´ë‹¤ â­switchâ­ê°€ ìì£¼ ì“°ì¸ë‹¤.
ex) switch(action.type){
        case action1:
            return data
        case action2:
            return data
        default:
            return data
    }
action.type ê°’ì„ stringìœ¼ë¡œ ë°”ë¡œ ì“°ê¸°ë³´ë‹¤ëŠ” const variable ë³€ìˆ˜ë¡œ ì„ ì–¸í•´ì„œ ì‚¬ìš©í•˜ë©´ ì—ëŸ¬ë°œê²¬ì— ìš©ì´í•˜ë‹¤.



##########################
### 2.1 State Mutation ###
##########################
-Never Mutation
stateëŠ” single source of truthì´ë©°, read-onlyì´ë‹¤.
storeë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” ìœ ì¼í•œ ë°©ë²•ì€ actionì„ ë³´ë‚´ëŠ” ë°©ë²•ë¿ì´ë‹¤.
stateë¥¼ mutateí•˜ì§€ ë§ì•„ì•¼í•œë‹¤.
ğŸ‘‰ mutating state ëŒ€ì‹ ì— new state objectë¥¼ ë¦¬í„´í•´ì•¼í•œë‹¤
ex)
const reducer = (state = [], action) => {
    switch (action.type) {
        case ADD_TODO:
            return state.push(action.text);             // mutating state ëŒ€ì‹ ì— new state objectë¥¼ ë¦¬í„´í•´ì•¼í•œë‹¤
        case DELETE_TODO:
            return [];
        default:
            return state;
    }
};
            ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡
const reducer = (state = [], action) => {
    switch (action.type) {
        case ADD_TODO:
            return [...state, { text: action.text }];   // stateë¥¼ mutateí•˜ì§€ì•Šê³  new state objectë¥¼ ë¦¬í„´
        case DELETE_TODO:
            return [];
        default:
            return state;
    }
};



########################
### 2.3 Delete To Do ###
########################
ğŸ‘‰ mutating state ëŒ€ì‹ ì— new state objectë¥¼ ë¦¬í„´í•´ì•¼í•œë‹¤.
filter()ëŠ” í…ŒìŠ¤íŠ¸ í†µê³¼í•œ ëª¨ë“  elementë“¤ë¡œ ìƒˆë¡œìš´ arrayë¥¼ ë§Œë“œë‹¤.
ex)
const reducer = (state = [], action) => {
    switch (action.type) {
        case ADD_TODO:
            return [{ text: action.text, id: Date.now() }, ...state];
        case DELETE_TODO:
            return state.filter(toDo => toDo.id !== action.id);         // stateë¥¼ mutateí•˜ì§€ì•Šê¸° ìœ„í•´ filter()ë¥¼ ì‚¬ìš©
            return state;
    }
};



#########################
### 4.0 Redux Toolkit ###
#########################
-Redux Toolkit
Reduxì—ì„œ ë§Œë“  ë¦¬ë•ìŠ¤ì˜ ë‹¨ì ë“¤ì„ ì œê±°í•˜ëŠ” ë°©ë²•. 
Redeux Toolkitì€ ì•„ë˜ì˜ ë‹¨ì ì„ ê·¹ë³µí•˜ê¸° ìœ„í•´ ë‚˜ì˜¨ íˆ´ì´ë‹¤.

ê¸°ì¡´ Reduxì˜ ë‹¨ì 
- store ë³µì¡ì„±
- ìœ ìš©í•´ì§€ë ¤ë©´ ë§ì€ íŒ¨í‚¤ì§€ë“¤ì„ ì¶”ê°€í•´ì•¼í•œë‹¤.
- ë§ì€ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œë¥¼ ìš”êµ¬



########################
### 4.1 createAction ###
########################
-createAction
Redux action type ë° creatorë¥¼ ì •ì˜í•˜ê¸° ìœ„í•œ helperí•¨ìˆ˜ì´ë‹¤.

ex)
import { createAction } from '@reduxjs/toolkit'

const increment = createAction('counter/increment');
let action = increment(3) // { type: 'counter/increment', payload: 3 }

- ë³€ê²½ëœ store
const ADD = "ADD";
const DELETE = "DELETE";

export const addToDo = text => {
    return {
        type: ADD,
        text
    };
};

export const deleteToDo = id => {
    return {
        type: DELETE,
        id: parseInt(id)
    };
};

            ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡

export const addToDo = createAction("ADD");
export const deleteToDo = createAction("DELETE");

ì°¸ì¡°
https://redux-toolkit.js.org/api/createAction



#########################
### 4.2 createReducer ###
#########################
-createReducer
switch êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.
stateë¥¼ mutateí•˜ê¸° ì‰½ê²Œ ë§Œë“¤ì–´ì¤€ë‹¤. => ë°°ì—´ì— pushë¥¼ í•˜ì—¬ ê¸°ì¡´ ë°°ì—´ì˜ ê°’ì„ ë³€í˜•ì‹œí‚¬ ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. ê¸°ì¡´ì—ëŠ” ìƒˆë¡œìš´ stateë¥¼ ë§Œë“¤ì–´ì•¼í–ˆìŒ
mutateë¥¼ í–ˆë‹¤ë©´ return X
mutateë¥¼ í•˜ì§€ ì•Šì•˜ë‹¤ë©´ return O
ex)
// reducer
const reducer = (state = currentState, action) => {
    switch (action.type) {
        case addToDo.type:
            const todoObj = { id: Date.now(), text: action.payload }
            const addTodoData = [todoObj, ...state];
            localStorage.setItem("todo", JSON.stringify(addTodoData));
            return addTodoData;
        case deleteToDo.type:
            const deleteTodoData = state.filter((toDo) => toDo.id !== action.payload);
            localStorage.setItem("todo", JSON.stringify(deleteTodoData));
            return deleteTodoData;
        default:
            return state;
    }
};

            ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡

// createReducer
const reducer = createReducer(currentState, {
    [addToDo]: (state, action) => {
        state.push({ id: Date.now(), text: action.payload });
        localStorage.setItem("todo", JSON.stringify(state));
    },
    [deleteToDo]: (state, action) => {
        state = state.filter((toDo) => toDo.id !== action.payload);
        localStorage.setItem("todo", JSON.stringify(state));
        return state;
    }
});



##########################
### 4.3 configureStore ###
##########################
-Redux DevTools(êµ¬ê¸€ í™•ì¥í”„ë¡œê·¸ë¨)
https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd?hl=ko

-configureStore
ë” ë‚˜ì€ ê°œë°œ ê²½í—˜ì„ ìœ„í•´ store ì„¤ì •ì— ëª‡ëª‡ ê¸°ë³¸ ê°’ì„ ì¶”ê°€í•œë‹¤.

ex) 
import { configureStore } from '@reduxjs/toolkit'

const store = configureStore({ reducer });

ì°¸ì¡°https://redux-toolkit.js.org/api/configureStore



#######################
### 4.4 createSlice ###
#######################
-createSlice
ì´ˆê¸° state, reducer í•¨ìˆ˜ì˜ ê°ì²´ "slice ì´ë¦„"ì„ ë°›ì•„ reducer ë° stateì— í•´ë‹¹í•˜ëŠ” ation creatorì™€ action typeì„ ìë™ìœ¼ë¡œ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.
ë‚´ë¶€ì ìœ¼ë¡œëŠ” createAction ë° createReducerë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ immerë¥¼ ì‚¬ìš©í•˜ì—¬ "mutating" ë¶ˆë³€ ì—…ë°ì´íŠ¸ë¥¼ ì‘ì„±í•  ìˆ˜ ë„ ìˆë‹¤.

ì°¸ì¡°
https://redux-toolkit.js.org/api/createSlice